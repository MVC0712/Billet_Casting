<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Home Page</title>
  <link rel="stylesheet" href="./Lib/main.css" />
  <link rel="stylesheet" href="./Lib/home.css" />
  </head>
  <body>
    <header>Home Page</header>
      <div style="flex-direction: row; display:flex;">
            <button id="make_excel">Make Excel</button>
            <button id="daily_input">Daily Input</button>
            <button id="homogenizing_input">Homogenizing Input</button>
            <button id="cutting_input">Cutting Input</button>
            <button id="warehouse_input">Warehouse Input</button>
            <button id="mea_file">Measurement File</button>
      </div>
      <div>
        <table id="summary_table" style="height: 450px;">
          <thead>
            <tr>
              <th>id</th>
              <th>Mã</th>
              <th>Ngày đúc</th>
              <th>Bắt đầu</th>
              <th>Kết thúc</th>
              <th>Vật liệu</th>
              <th>Tổng vào</th>
              <th>KL billet</th>
              <th>KL OK</th>
              <th>SL 1200</th>
              <th>SL 600</th>
              <th>BlOk/KLBl</th>
              <th>BlOk/TT</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <script src="./Lib/jquery.min.js"></script>
      <script>
        $(document).on("click", "#make_excel", function () {
          window.open("/Billet_Casting/MakeExcelFile");
        });
  
      $(document).on("click", "#daily_input", function () {
        window.open("/Billet_Casting/DailyReport");
      });

      $(document).on("click", "#homogenizing_input", function () {
        window.open("/Billet_Casting/Homo");
      });

      $(document).on("click", "#cutting_input", function () {
        window.open("/Billet_Casting/Cutting");
      });
      $(document).on("click", "#warehouse_input", function () {
        window.open("/Billet_Casting/Warehouse");
      });
      $(document).on("click", "#mea_file", function () {
        window.open("/Billet_Casting/Measurement");
      });
      </script>
      <script>
        let fileName;
        let sendData = new Object();
        let ajaxReturnData;
        const myAjax = {
          myAjax: function (fileName, sendData) {
            $.ajax({
              type: "POST",
              url: "./Lib/"+fileName,
              dataType: "json",
              data: sendData,
              async: false,
            })
              .done(function (data) {
                ajaxReturnData = data;
              })
              .fail(function () {
                alert("DB connect error");
              });
          },
        };
        $(function () {
          makeSummaryTable();
        });
        function makeSummaryTable() {
          var fileName = "SelSummary.php";
          var sendData = {
              dummy: "dummy",
          };
          myAjax.myAjax(fileName, sendData);
          fillTableBody(ajaxReturnData, $("#summary_table tbody"));
        };
        function fillTableBody(data, tbodyDom) {
          $(tbodyDom).empty();
          data.forEach(function(trVal) {
              let newTr = $("<tr>");
              Object.keys(trVal).forEach(function(tdVal, index) {
                  $("<td>").html(trVal[tdVal]).appendTo(newTr);
              });
              $(newTr).appendTo(tbodyDom);
          });
        };
      </script>
</html>